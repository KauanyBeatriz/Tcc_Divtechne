<!DOCTYPE html>
<html lang="pt">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
<!--    Versão usada do Bootstrap foi a 5.3    -->
        <!--    Link do Bootstrap >> https://getbootstrap.com/docs/5.3/getting-started/introduction/  -->

<!--    Link do Bootstrap >>   -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
        <link rel="shortcut icon" href="img/Icons/favicon_io (1)/favicon-32x32.png" type="image/x-icon">	
        <link href="./Bootstrap/css/bootstrap.css" type=" text/css" rel="stylesheet">

<!--    Link do Bootstrap >>  https://boxicons.com/ -->
        <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
        <link href="{{ url_for('static', filename='css/esqueciSenha.css') }}" rel="stylesheet" type="text/css">
        <link href="{{ url_for('static', filename='css/botao.css') }}" rel="stylesheet" type="text/css">

        <title> DIVTECHNE | Esqueci minha senha</title>
    </head>


    <body>
        <div class="container-fluid mt-1">
        <!-- Lista de alertas flash !-->
            <!-- Mesagens vai ser = pegue todas as mensagens flask e deixa elas serem personalzidas !-->
            {% with mensagens = get_flashed_messages(with_categories=True) %}
                <!-- Se essa mensagem existir !-->
                {% if mensagens %}
                    <!-- Unpacking dessa lista de mensagens -> categoria = personalização -> mensagem = texto da mensagem !-->
                    {% for categoria, mensagem in mensagens %}
                        <div class="alert {{ categoria }} alert-dismissible fade show alerta" role="alert">
                            {{ mensagem }}
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
        </div>

        <div class="container-fluid m-0 p-0 border" id="caixa">
            <div class="container row my-auto mx-auto m-0 p-0 ">
                <div class="col-12 voltar pt-2 ps-0 ms-0">
                    <a class="btn botao me-auto" href="{{ url_for('homepage') }}">voltar</a>
                </div>

                <div class="col-10 col-lg-7 esqueciSenha mx-auto m-0 p-0 border">
                    <div class="row m-0 p-0">

                        <div class="col-12 mb-4 img my-auto">
                            <div class="row mx-auto my-auto">
                                <div class="col-10 col-lg-8 my-auto mx-auto p-0 m-0">
                                    <center class="mt-3 d-flex my-auto mx-auto p-0 m-0"><img src="{{ url_for('static', filename='fixos/Img/navbar/logobranca.png') }}" height="50px" width="40px" class="img-fluid my-auto ms-auto me-1 p-0 m-0"><h3 class="my-auto me-auto p-0 m-0">DIVTECHNE</h3></center>
                                </div>
                            </div>
                        </div>
                        <form method="POST" action="">
                            {{ form_mudar_senha.csrf_token }}
    
                            <div class="col-12 col-lg-11 mx-auto mb-3">
                                {{ form_mudar_senha.email.label(class="form-control-label") }}

                                  <!-- caso tenha algum erro de preenchimento do campo !-->
                                  {% if form_mudar_senha.email.errors %}
                                    <!-- Marca a borda da caixa do campo em vermelho pela classe is-invalid !-->
                                    {{ form_mudar_senha.email(class="form-control is-invalid") }}
                                  <!-- E exibe a mensagem de erro personalizada pela classe invalid-feedback !-->
                                  <div class="invalid-feedback">
                                    {% for erro in form_mudar_senha.email.errors %}
                                        {{ erro }}
                                    {% endfor %}
                                  </div>   
                            
                                  <!-- Caso contrário exibe a caixa normalmente !-->
                                  {% else %}
                                    {{ form_mudar_senha.email(class="form-control") }}
                                  {% endif %}
                            </div>
    
                            <div class="col-12 col-lg-11 mx-auto mb-4">
                                {{ form_mudar_senha.senha_nova.label(class="form-control-label") }}

                                  <!-- caso tenha algum erro de preenchimento do campo !-->
                                  {% if form_mudar_senha.senha_nova.errors %}
                                    <!-- Marca a borda da caixa do campo em vermelho pela classe is-invalid !-->
                                    {{ form_mudar_senha.senha_nova(class="form-control is-invalid") }}
                                  <!-- E exibe a mensagem de erro personalizada pela classe invalid-feedback !-->
                                  <div class="invalid-feedback">
                                    {% for erro in form_mudar_senha.senha_nova.errors %}
                                        {{ erro }}
                                    {% endfor %}
                                  </div>   
                            
                                  <!-- Caso contrário exibe a caixa normalmente !-->
                                  {% else %}
                                    {{ form_mudar_senha.senha_nova(class="form-control") }}
                                  {% endif %}
                            </div>
                            
                            <div class="col-12 col-lg-11 mx-auto mb-4">
                                {{ form_mudar_senha.confirmacao_senha_nova.label(class="form-control-label") }}

                                  <!-- caso tenha algum erro de preenchimento do campo !-->
                                  {% if form_mudar_senha.confirmacao_senha_nova.errors %}
                                    <!-- Marca a borda da caixa do campo em vermelho pela classe is-invalid !-->
                                    {{ form_mudar_senha.confirmacao_senha_nova(class="form-control is-invalid") }}
                                  <!-- E exibe a mensagem de erro personalizada pela classe invalid-feedback !-->
                                  <div class="invalid-feedback">
                                    {% for erro in form_mudar_senha.confirmacao_senha_nova.errors %}
                                        {{ erro }}
                                    {% endfor %}
                                  </div>   
                            
                                  <!-- Caso contrário exibe a caixa normalmente !-->
                                  {% else %}
                                    {{ form_mudar_senha.confirmacao_senha_nova(class="form-control") }}
                                  {% endif %}
                            </div>
                            
                            <div class="col-12 col-lg-11 mx-auto mb-4">
                                {{ form_mudar_senha.token.label(class="form-control-label") }}

                                  <!-- caso tenha algum erro de preenchimento do campo !-->
                                  {% if form_mudar_senha.token.errors %}
                                    <!-- Marca a borda da caixa do campo em vermelho pela classe is-invalid !-->
                                    {{ form_mudar_senha.token(class="form-control is-invalid") }}
                                  <!-- E exibe a mensagem de erro personalizada pela classe invalid-feedback !-->
                                  <div class="invalid-feedback">
                                    {% for erro in form_mudar_senha.token.errors %}
                                        {{ erro }}
                                    {% endfor %}
                                  </div>   
                            
                                  <!-- Caso contrário exibe a caixa normalmente !-->
                                  {% else %}
                                    {{ form_mudar_senha.token(class="form-control") }}
                                  {% endif %}
                            </div>
    
                            <div class="col-12 mx-auto mb-3">
                                <div class="row">
    
                                    <div class="col-4 mx-auto m-0 p-0">
                                        <button type="button" data-bs-toggle="modal" data-bs-target="#esqueciSenha"  class="btn botao2">Esqueci meu Token</button>
                                    </div>
    
                                    <div class="col-4 mx-auto m-0 p-0">
                                        {{ form_mudar_senha.botao_esqueci_senha(class="btn botao2") }}
                                    </div>
                                </div>
                               
                            </div>
                    </form>
                    </div>
                </div>
            </div>
        </div>
        


        <!--    modal de configuração -->
        <div class="modal fade" id="esqueciSenha" aria-hidden="true" aria-labelledby="exampleModalToggleLabel" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content">

                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="exampleModalToggleLabel">Pedir token</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    
                    <form method="POST" action="">
                        {{ form_solicitar_token.csrf_token }}
                
                            <div class="modal-body"> 
                                <div class="row">                           
                
                                    <div class="col-12 col-lg-11 mx-auto mb-3">
                                        {{ form_solicitar_token.email_token.label(class="form-control-label") }}

                                        <!-- caso tenha algum erro de preenchimento do campo !-->
                                        {% if form_solicitar_token.email_token.errors %}
                                        <!-- Marca a borda da caixa do campo em vermelho pela classe is-invalid !-->
                                        {{ form_solicitar_token.email_token(class="form-control is-invalid") }}

                                        <!-- E exibe a mensagem de erro personalizada pela classe invalid-feedback !-->
                                        <div class="invalid-feedback">
                                            {% for erro in form_solicitar_token.email_token.errors %}
                                                {{ erro }}
                                            {% endfor %}
                                        </div>

                                            <!-- Caso contrário exibe a caixa normalmente !-->
                                            {% else %}
                                                {{ form_solicitar_token.email_token(class="form-control") }}
                                            {% endif %}
                                    </div>
                                    
                                </div>                                           
                            </div>
        
                            <div class="modal-footer">
                                {{ form_solicitar_token.botao_solicitar_token(class="btn botao") }}
                            </div>
                        
                    </form>
                </div>
            </div>
        </div>
        <!--    fim do modal da pagina    -->



        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js" integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N" crossorigin="anonymous"></script>  
        <script src="{{ url_for('static', filename='js/nav.js') }}"></script>
        <script src="{{ url_for('static', filename='js/temas.js') }}"></script>
    </body>
</html>


